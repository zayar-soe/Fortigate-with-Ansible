---
- hosts: fortigates
  connection: httpapi
  collections:
  - fortinet.fortios
  
  tasks:
  - name: Save config revision on FortiGate
    fortinet.fortios.fortios_monitor:
      vdom: "root"
      selector: "save.system.config-revision"
      access_token: "{{ fortitoken }}"
      fos_ip: "{{ inventory_hostname }}"
      fos_validate_certs: false
      params:
        name: "pre-upgrade-snapshot"
        comment: "Auto backup before firmware upgrade"
